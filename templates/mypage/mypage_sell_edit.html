{% extends "index.html" %} 
{% block head %} 
{{ super() }}
    <link rel="stylesheet"  href="{{ url_for('static', filename='mypage1_1.css') }}">
    {% endblock head %} 

{% block section %}

<div>
    <main class="product-create">
    <div class="pc-container">
        <h1 class="pc-title">상품 정보 수정</h1>
        <div class="pc-divider"></div>

      <form class="pc-card pc-form" action="/update_item_post/{{ item_id }}" method="post" enctype="multipart/form-data">
        
        <div class="pc-field">
          <label for="name" class="pc-label">상품명</label>
          <div class="pc-control">
            <input type="text" name="name" id="name" class="pc-input" value="{{ data.name }}" required>
          </div>
        </div>
        
        <div class="pc-field">
          <label for="cost" class="pc-label">가격</label>
          <div class="pc-control">
            <input type="text" name="price" id="cost" inputmode="numeric" class="pc-input" value="{{ data.price }}" required/>
          </div>
        </div>

        <div class="pc-field">
          <label for="addr" class="pc-label">주소</label>
          <div class="pc-control">
            <input type="text" name="addr" id="addr" class="pc-input pc-input--full" value="{{ data.addr }}" required/>
          </div>
        </div>

        <div class="pc-field">
          <label for="category" class="pc-label">카테고리</label>
          <div class="pc-control">
            <div class="pc-select-wrap">
              <select id="category" name="category" class="pc-input pc-select">
                <option value="기타" {% if data.category == '기타' %}selected{% endif %}>기타</option>
                <option value="가전" {% if data.category == '가전' %}selected{% endif %}>가전</option>
                <option value="의류" {% if data.category == '의류' %}selected{% endif %}>의류</option>
                <option value="생활" {% if data.category == '생활' %}selected{% endif %}>생활</option>
                <option value="도서" {% if data.category == '도서' %}selected{% endif %}>도서</option>
              </select>
              <svg class="pc-select-icon" xmlns="http://www.w3.org/2000/svg" width="21" height="13" viewBox="0 0 21 13" fill="none">
                <path d="M10.0514 11.6084C10.2495 11.8242 10.5896 11.8242 10.7877 11.6084L20.2057 1.33789C20.4996 1.0173 20.2724 0.50029 19.8375 0.5H1.00159C0.566743 0.50029 0.33948 1.0173 0.633423 1.33789L10.0514 11.6084Z" fill="#fff" stroke="black"/>
              </svg>
            </div>
          </div>
        </div>

        <div class="pc-field2">
          <span class="pc-label">사진 수정</span>
          <div class="pc-control">
            <div class="pc-upload-row">
              <label for="img" class="pc-btn">파일 선택</label>
              <input type="file" name="file" id="img" accept="image/*" multiple hidden />
              <span class="pc-hint">*파일을 선택하지 않으면 기존 사진이 유지됩니다.</span>
            </div>
            
            <div style="margin-top: 10px;">
                <p style="font-size: 0.9em; color: #666;">현재 이미지:</p>
                {% if data.img_path %}
                    {% if data.img_path is not string %}
                        {% for img in data.img_path %}
                            <img src="{{ url_for('static', filename='images/' + img) }}" alt="product image" style="width: 100px; height: 100px; object-fit: cover; border-radius: 5px; border: 1px solid #ddd;">
                        {% endfor %}
                    
                    {% else %}
                        <img src="{{ url_for('static', filename='images/' + data.img_path) }}" alt="Current Image" style="width: 100px; height: 100px; object-fit: cover; border-radius: 5px; border: 1px solid #ddd;">
                    {% endif %}
                {% else %}
                    <span>이미지 없음</span>
                {% endif %}
            </div>
          </div>
        </div>
        
        <div class="pc-field2">
          <label for="description" class="pc-label">상품 설명</label>
          <div class="pc-control">
            <textarea type="text" id="description" name="description" rows="6" class="pc-input pc-textarea pc-input--full">{{ data.description }}</textarea>
          </div>
        </div>

        <div class="pc-actions">
          <input type="submit" value="수정 완료" class="pc-submit" />
        </div>        
      </form>
    </div>
    </main>
</div>
{% endblock section %}