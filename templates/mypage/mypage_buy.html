{% extends "index.html" %} 
{% block head %} 
{{ super() }}
    <link rel="stylesheet"  href="{{ url_for('static', filename='mypage1_1.css') }}">
{% endblock head %} 

{% block section %}
<main class="purchase-history">
    <h2><span class="user-name">{{ user_name }}</span> 님의 구매 내역</h2>

    {% if total > 0 %}
    <!-- 구매 내역 카드 리스트 -->
    <div class="purchase-list">

        <!-- 카드 -->
        {% for order_id, order in row1 %}
        <div class="purchase-card">
            <div class="item-image"></div> <!--이미지 경로 추가-->
            <div class="item-content">
                <div class="item-info">
                    <p class="seller">판매자: {{ order.seller }}</p>
                    <p class="item-name">{{ order.item_name }}</p>
                    <p class="item-price">{{ order.item_price }}원</p>
                </div>
                <button type="button" onclick=" location.href='{{ url_for('reg_review_init', name=order.item_name) }}'" class="review-btn">리뷰 작성</button>
            </div>
        </div>
        {% endfor %}
    </div>    

    {% else %}
    <p>등록된 상품이 없습니다.</p>
    {% endif %}

    <!-- 페이지네이션 -->
    <nav class="pagination">

        <!-- 이전 페이지 버튼 -->
        {% if page > 0 %}
        <a class="page-btn" href="{{ url_for('mypage_buy', page=page-1) }}">&lsaquo;</a>
        {% else %}
        <span class="page-btn" style="opacity:0.4; pointer-events:none;">&lsaquo;</span>
        {% endif %}

        <!-- 페이지 번호 반복 -->
        {% for i in range(page_count) %}
        <a class="page-number {% if i == page %}active{% endif %}" 
            href="{{ url_for('mypage_buy', page=i) }}">
            {{ i + 1 }}
        </a>
        {% endfor %}

        <!-- 다음 페이지 버튼 -->
        {% if page < page_count - 1 %}
        <a class="page-btn" href="{{ url_for('mypage_buy', page=page+1) }}">&rsaquo;</a>
        {% else %}
        <span class="page-btn" style="opacity:0.4; pointer-events:none;">&rsaquo;</span>
        {% endif %}

    </nav>

</main>




{% endblock section %}