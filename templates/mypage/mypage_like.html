{% extends "index.html" %} 
{% block head %} 
{{ super() }}
  <link rel="stylesheet"  href="{{ url_for('static', filename='item_style.css') }}">
  <link rel="stylesheet"  href="{{ url_for('static', filename='mypage2.css') }}">
{% endblock head %} 

{% block section %}
<main class="mypage-like-container">
<h2 class="user-name1"><span class="user-name2">{{ user_name }}</span> 님의 찜 목록</h2>

<div class="container">

  {% if total > 0 %}
  <div class="product-grid">

    <!-- Row 1 -->
    {% for item_id, item in row1 %}
    <article class="product-card" style="cursor: pointer;" onclick="location.href='/view_detail/{{ item.productID }}/'">
      <div class="hm-thumb">
        {% set img = item.img_path[0] if item.img_path is sequence and item.img_path is not string else item.img_path %}
        
        {% if img %}
            <img src="{{ url_for('static', filename='images/' + img) }}" width="140" height="200" style="object-fit: cover;">
        {% else %}
            <div style="width: 140px; height: 200px; background-color: #f0f0f0; display: flex; align-items: center; justify-content: center; color: #888; font-size: 12px;">
                No Image
            </div>
        {% endif %}
      </div>
      <div class="info">
          <div class="text">
              <p class="product-name">{{ item.name }}</p>
              <p class="price">{{ item.price }}원</p>
          </div>
          <button class="heart" onclick="event.stopPropagation(); toggleLike('{{ item.productID }}')">
              <svg width="24" height="24" viewBox="0 0 48 48" fill="none" aria-hidden="true">
                  <path d="M41.68 9.22..." fill="red" /> </svg>
          </button>
      </div>
  </article>
    {% endfor %}

    <!-- Row 2 -->
    {% for item_id, item in row2 %}
    <article class="product-card" style="cursor: pointer;" onclick="location.href='/view_detail/{{ item.productID }}/'">
      <div class="hm-thumb">
        {% set img = item.img_path[0] if item.img_path is sequence and item.img_path is not string else item.img_path %}
        
        {% if img %}
            <img src="{{ url_for('static', filename='images/' + img) }}" width="140" height="200" style="object-fit: cover;">
        {% else %}
            <div style="width: 140px; height: 200px; background-color: #f0f0f0; display: flex; align-items: center; justify-content: center; color: #888; font-size: 12px;">
                No Image
            </div>
        {% endif %}
      </div>
      <div class="info">
          <div class="text">
              <p class="product-name">{{ item.name }}</p>
              <p class="price">{{ item.price }}원</p>
          </div>
          <button class="heart" onclick="event.stopPropagation(); toggleLike('{{ item.productID }}')">
              <svg width="24" height="24" viewBox="0 0 48 48" fill="none" aria-hidden="true">
                  <path d="M41.68 9.22..." fill="red" /> </svg>
          </button>
      </div>
  </article>
    {% endfor %}
  
  </div>
  {% endif %}
 

  <!-- 페이지네이션 -->
  <nav class="pagination">

      <!-- 이전 페이지 버튼 -->
      {% if page > 0 %}
      <a class="page-btn" href="{{ url_for('mypage_like', page=page-1) }}">&lsaquo;</a>
      {% else %}
      <span class="page-btn" style="opacity:0.4; pointer-events:none;">&lsaquo;</span>
      {% endif %}

      <!-- 페이지 번호 반복 -->
      {% for i in range(page_count) %}
      <a class="page-number {% if i == page %}active{% endif %}" 
          href="{{ url_for('mypage_like', page=i) }}">
          {{ i + 1 }}
      </a>
      {% endfor %}

      <!-- 다음 페이지 버튼 -->
      {% if page < page_count - 1 %}
      <a class="page-btn" href="{{ url_for('mypage_like', page=page+1) }}">&rsaquo;</a>
      {% else %}
      <span class="page-btn" style="opacity:0.4; pointer-events:none;">&rsaquo;</span>
      {% endif %}

  </nav>

</main>

{% endblock section %}
