{% extends "index.html" %} {% block head %} {{ super() }}
<link
  rel="stylesheet"
  href="{{ url_for('static', filename='review_style.css') }}"
/>
{% endblock head %} {% block section %}

<div class="rvbyitem-top-bar">
  <div class="rvbyitem-info-box">
    <span class="rvbyitem-label">상품 : <strong>{{ product_name }}</strong></span>
    <span class="rvbyitem-divider">|</span>
    <span class="rvbyitem-label">평균 별점 :</span>
    <span class="rvbyitem-score">{{ avg_rating|default('0.0') }}</span>
  </div>
  
  <form class="rvbyitem-sorts" method="get" action="">
    <select class="rvbyitem-sort-cat" name="order" onchange="this.form.submit()">
      <option value="최신순">최신순</option>
      <option value="오래된 순">오래된 순</option>
    </select>

    <select class="rvbyitem-sort-cat" name="rating" onchange="this.form.submit()">
      <option value="별점높은순">별점높은순</option>
      <option value="별점낮은순">별점낮은순</option>
    </select>
  </form>
</div>

<div class="rvall-list">
  {% if reviews %}
    {% for rid, rv in reviews.items() %}
      <div class="rvall-card">
        <div class="rvall-card-content-wrapper">

          <div class="rvall-main-content">
            <div class="rvall-review-header">
              <div class="rvall-user-info">
                <div class="rvall-avatar"></div>
                <div class="rvall-user-name">{{ rv.nickname }}</div>
              </div>
            </div>
            <div class="rvall-review-title-section">
              <h3 class="rvall-review-title">{{ rv.title }}</h3>
              <div class="rvall-rating">
                {% for i in range(rv.rate|int) %}
                  <span class="star">★</span>
                {% endfor %}
                {% for i in range(5 - rv.rate|int) %}
                  <span class="star star--empty">★</span>
                {% endfor %}
              </div>
            </div>

            <div class="rvall-review-text-block">
              <p class="rvall-review-text">
                {{ rv.content | replace('\n', '<br>') | safe }}
              </p>
            </div>
          </div>

          <div class="rvall-media-placeholder">
            {% if rv.img_path %}
              <img src="{{ url_for('static', filename='images/' + rv.img_path) }}"
                   alt="리뷰 이미지"
                   class="rvall-media-img">
            {% endif %}
          </div>
        </div>
        <hr class="rvall-divider" />
      </div>
    {% endfor %}
  {% else %}
    <p>등록된 리뷰가 없습니다.</p>
  {% endif %}

  <!-- 페이지네이션, 추후 수정 -->
  <nav class="pagination">
    {# if current_page > 1 #}
    <a class="page-btn" href="#">&lsaquo;</a>
    {# endif #} {# for p in pages #}
    <a class="page-number active" href="#">1</a>
    <a class="page-number" href="#">2</a>
    <a class="page-number" href="#">3</a>
    <span>…</span>
    <a class="page-number" href="#">10</a>
    {# endfor #} {# if current_page < total_pages #}
    <a class="page-btn" href="#">&rsaquo;</a>
    {# endif #}
  </nav>
</div>
{% endblock section %}
